# PR: Customer-Level "Agentic P&L" Dashboard for CS Teams

## Summary

Implements a Customer-Level "Agentic P&L" Dashboard that enables Customer Success (CS) teams to map every LLM dollar to customer revenue. The dashboard tracks agent execution costs per customer, computes risk tiers, identifies high-risk accounts, and provides trend analysis for proactive intervention.

Resolves #4041

## Changes

### New Files

| File | Description |
|------|-------------|
| `core/framework/observability/customer_pnl_schemas.py` | Pydantic data models for cost records, health snapshots, risk tiers, trends, and portfolio summaries |
| `core/framework/observability/customer_pnl_tracker.py` | Core tracker with risk assessment engine (weighted composite scoring), trend computation, and dashboard summary generation |
| `core/framework/observability/CUSTOMER_PNL_DASHBOARD.md` | Feature documentation with architecture overview, quickstart guide, risk thresholds, and integration examples |
| `core/tests/test_customer_pnl.py` | 31 unit tests covering schemas, cost calculations, snapshots, risk assessment, trends, dashboard summary, and utilities |

### Modified Files

| File | Change |
|------|--------|
| `core/framework/observability/__init__.py` | Added exports for all new Customer P&L modules (`CustomerPnLTracker`, `AgentCostRecord`, `CustomerHealthSnapshot`, `CustomerHealthTrend`, `CustomerPnLSummary`, `RiskTier`, `TrendDirection`) |

## Key Features

- **Agentic P&L Tracking**: Maps agent costs (base + evolution) to customer revenue for per-account profitability analysis
- **Risk Tier System**: Classifies accounts as CRITICAL/HIGH/MEDIUM/LOW based on a weighted composite of failure rate (35%), evolution cost ratio (25%), margin impact (25%), and retry intensity (15%)
- **Attention Flags**: Surfaces specific issues like excessive retries, high evolution costs, and eroding margins
- **Trend Analysis**: Compares snapshots across periods to detect IMPROVING/STABLE/WORSENING trajectories
- **Portfolio Dashboard**: Aggregates all customer metrics into a single summary with risk distribution and top-cost rankings

## Testing

All 31 tests pass:

```
tests/test_customer_pnl.py - 31 passed (4.08s)
```

Test categories:
- Schema defaults and enum values (5 tests)
- Execution recording and cost calculations (3 tests)
- Customer snapshot aggregation (5 tests)
- Risk tier assessment (4 tests)
- Trend direction computation (4 tests)
- Dashboard summary generation (7 tests)
- Utility methods (3 tests)
